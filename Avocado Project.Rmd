---
title: "Avocado Project"
author: "Evelyn Chen, Christen Paryzch"
date: "10/12/2019"
output: html_document
---
Research topic: Is the 'avocadopocalypse' real?

Loading libraries
```{r  include=FALSE}
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(plotly)
library(Metrics)
library(forcats)
library(RColorBrewer)
```

We will be using data from the Hass Avocado Board website, published in May 2018 and compiled into a CSV. 

```{r}
rm(list=ls())
avocado<-read_csv(file="avocado.csv")
```

The data represents weekly retail scan data for National review volume and price, from 2015 - 2018. The retail scan data comes directly from retailers' cash registers, which reflects actual retail sales of Hass avocados. This is a quick explanation of the variables in the dataset.

Date: Date of observation
AveragePrice: the average price of a single avocado
Total Volume: total volume of avocados sold (pounds)
Total bags: total number of bags of avocados sold
Small bags: total number of small bags of avocados sold
Large bags: total number of large bags of avocados sold
XLarge Bags: total number of extra large bags of avocados sold
Type: conventional or organic
Year: the year
Region: the city or region of the sale
Total volume: total number of avocados sold
4046: total number of PLU 4046 avocados sold
4225: total number of PLU 4225 avocados sold
4770: total number of PLU 4770 avocados sold

##Univariate graphics

Univariate graphics helps to understand how individual variables are distributed across the sample. Below shows the frequency plot of avocado type, showing that this dataset includes retail sales of both conventional and organic avocados. We can use geom_bar to get this done. By default, this will give us a count in each type of avocado. 

```{r}
gg<-ggplot(avocado,aes(x=type,fill=type))
gg<-gg+geom_bar()
gg
```

The dataset shows weekly retail data of avocado sales from 2015 - 2018. We are also interested in the distribution of the average price of avocados in this dataset. We will use the ggplot command to create a histogram of the 'AveragePrice' variable. 
```{r}
gg<-ggplot(avocado,aes(x=AveragePrice))
gg<-gg+geom_histogram(binwidth = 0.1,fill="lightblue")
gg

avocado%>%summarize(mean_AveragePrice=mean(AveragePrice,na.rm=TRUE))
##unconditional average as a new variable
avocado<-avocado%>%mutate(mean_AveragePrice=mean(AveragePrice,na.rm=TRUE))
``` 

The distribution is fairly normal. The unconditional mean of 'AveragePrice' is 1.41. 



```{r error_terms}
avocado<-avocado%>%mutate(e1=AveragePrice-mean_AveragePrice)
rmse_averageprice<-rmse(avocado$AveragePrice,avocado$mean_AveragePrice)
rmse_averageprice
```
On average, we would be off by $0.40 across the whole dataset. At first glance, this error may not seem very big, but 'AveragePrice' ranges from 0.44 to 3.25. A RMSE error value of $0.40 is fairly significant, in this context. 

Density plots provide a continous graphic of the distribution of a variable:
```{r}
gg<-ggplot(at,aes(x=DistanceFromHome))
gg<-gg+geom_density()
gg

## Changing bandwidth-- not recommended, just showing you how. It smooths out the density plot. Instead of the bandwidth = 1 mile, it is now 10 miles. 
gg<-gg+geom_density(bw=10)
gg
```



Our primary outcome of interest will be AveragePrice. 


The data represents weekly retail scan data for national retail volume and price. We are interested in looking at the historical data over time in regards to price, and we hypothesize whether fluctuations in unit price are correlated to political trade tensions (that may ultimately affect consumer demand). We also hope to determine whether certain regions of the country are resistant to economic/trade-related pressures. 

We plan to break the data down by region, though the structure of the current data set requires that we 'clean' the data into consistent labels, i.e., currently some of the data is listed by city, others by region. 
