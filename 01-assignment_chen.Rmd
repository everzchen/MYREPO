---
title: "01-assignment_chen.Rmd"
author: "Evelyn Chen"
date: "8/24/2019"
output: 
  html_document: default
---
## Hello, World!
The following command prints, "Hello, world!"
```{r}
print("Hello, world!")
```

## Installing Libraries
Installing the necessary libraries - tidyverse

```{r}
library(tidyverse)
```

```{r  include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(plotly)
library(Metrics)
```

##Load Data
```{r load_data}
load("college.Rdata")
```

## List of variables in the `college.Rdata` dataset:

*Variable Name* :*Definition*

instnm: Institution Name

stabbr: State Abbreviation

year: Year

control: control of institution, 1=public, 2= private non-profit, 3=private for-profit

preddeg: predominant degree, 1= certificate, 2= associates, 3= bachelor's, 4=graduate

adm_rate: Proportion of Applicants Admitted

sat_avg: Midpoint of entrance exam scores, on SAT scale, math and verbal only

costt_4a: Average cost of attendance (tuition and room and board less all grant aid)

debt_mdn: Median debt of graduates

md_earn_wne_p6: Earnings of graduates who are not enrolled in higher education, six years after graduation

ugds: number of undergraduates

## Homework Questions
## Question 1. Calculate the average earnings for individuals at the most selective and least selective colleges in the dataset.

The following code filters for schools whose admission rate is greater than 30%, a condition we deem appropriate for schools being the least selective. Within those schools, I tasked Rstudio to create a variable that calculated the average earnings of graduates, six years after graduation.

Then, I selected the schools whose admission rates is less than 10%, signifying that these schools are the most selective. Within this group of schools, Rstudio created a variable that calculated the average earnings of graduates, six years after graduation.

```{r}
## What's the average earnings for individuals at the least selective schools?
sc%>%filter(adm_rate>.3)%>%summarize(md_earn_wne_p6=mean(md_earn_wne_p6,na.rm=TRUE))

## What's the average earnings for individuals at the most selective schools?
sc%>%filter(adm_rate<.1)%>%summarize(md_earn_wne_p6=mean(md_earn_wne_p6,na.rm=TRUE))
```
Answer: The average earnings for individuals at the most and least selective colleges is 53500 and 34747, respectively.

## Question 2. Determine whether colleges with very high SAT scores tend to be larger or smaller than colleges with low SAT scores

College size can be interpreted using the variable, ugds, the number of undergraduates. Dell'Arte International School of Physical Theatre has the smallest undergraduate program of only 27 students.  Florida International University has the largest number of undergraduates, 30,920 students. To determine if colleges with high SAT scores tend to be larger or smaller than colleges with low SAT scores, I decided to create a scatterplot graphic to examine the relationship between school size and average SAT score.

The following code, ggplot, will create a graphics object. I will name it gg. Within this, I declare the dataset ('sc') the x variable ('sat_avg') and the y variable ('ugds'). I will also note that I want to use the institutional name ('instnm') as text.

The last couple lines of code makes this scatterplot interactive, which makes it possible to put a mouse cursor over a particular point and see what university it corresponds to.

```{r}
gg<-ggplot(data=sc, aes(x=sat_avg,y=ugds,text=instnm))
gg<-gg+geom_point(alpha=.5,size=.5)
gg<-gg+xlab("Average SAT")+ylab("Number of Undergraduates")
gg
gg_p<-ggplotly(gg)
gg_p
```

At first glance, there does not seem to be a strong relationship between college size and SAT scores. A fair number of universities with around 10,000 undergraduates have a range of average SAT scores. For example, CUNY Lehman College has 8821 undergraduates with an average SAT score of 910, and Northwestern University has 8905 undergraduates with an average SAT score of 1427.

I decided to plot a linear regression line on this scatterplot to examine the relationship between average SAT score and the number of undergraduates.

```{r}
plot(sc$sat_avg, sc$ugds,main="Scatterplot of Number of Undergraduates and Average SAT Score", xlab="Average SAT", ylab="Number of Undergraduates", pch=19)
sat.reg <- lm(ugds ~ sat_avg, data=sc)
abline(sat.reg)
```

The regression line shows that there is a slightly positive relationship between average SAT score and the number of undergraduates in a college. To determine if this relationship is statistically significant or not, I ran a summary of the linear regression model. 

```{r}
summary(sat.reg)
```

A simple linear regression analysis showed that the size of a college cannot be significantly predicted from average SAT scores, F(1, 96) = 1.744, p > .05, R^2 = 0.0076. This indicates that neither the slope nor intercept is statistically significant. The slope p>.05. The results confirm our initial inclination. This dataset does not indicate whether colelges with high SAT scores tend to be larger or smaller than colleges with low SAT scores.

## Question 3. Plot the relationship between cost and debt. What do you see? Does this surprise you?

To examine the relationship between the cost of attendance and median student debt, I will use the following code, ggplot, to create a graphics object. I will name it as gg_costdebt. Using the dataset ('sc') the x variable ('debt_mdn') and the y variable ('costt4_a'). I will also note that I want to use the institutional name ('instnm') as text. The last couple lines of code makes this scatterplot interactive, which makes it possible to put a mouse cursor over a particular point and see what university it corresponds to.

```{r}
gg<-ggplot(data=sc, aes(x=costt4_a,y=debt_mdn,text=instnm))
gg<-gg+geom_point(alpha=.5,size=.5)
gg<-gg+xlab("Average Cost of Attendance")+ylab("Median Debt of Graduates")
gg
gg_p<-ggplotly(gg)
gg_p
```
On first impression, one might presume that if the average cost of attendance is higher, then the median debt of graduates will also be higher. The scatterplot demonstrates that to some extent. Several universities whose average cost of attendance is in the range of 50k has the highest median debt of graduates, around 16k to 17k. In fact, the majority of graduates with median debt of less than 15,000 dollars receive a diploma from schools whose average cost of attendance is 40,000 dollars or less. Furthermore, schools with the least average cost of attendance, around 10,000 dollars have the smallest median of debt. In examining the extremes, schools with the highest and lowest average cost of attendnce, their graduates have the highest and lowest median debt, respectively. This aligns with my initial assumptions. 

There are a couple elements in the scatterplot that surprise me. First, I did not expect there to be such a wide range of median debt among the universities whose average cost of attendance was around 50,000. For example, the average cost of attending Harvard University is 50,250 but the median debt of its graduates is only 6000. Yet, students who graduate from the California Institute of the Arts, whose average cost of attendance is 48,784, finish with a median debt of 18187.5. It would be interesting to explore to what extent their graduates were given grants and scholarships to support their educational expenses, but this information was not provided in the current dataset.

Second, I did not anticipate schools whose average cost of attendance is between 13,000 - 35,000 dollars to have graduates with such a similar median debt amount. It baffles me to think that graduates from Albany State University to have a median debt similar to graduates from Rocky Mountain of Art and Design, even though the average cost of attending Rocky Mountain of Art and Design is almost 21,000 dollars more expensive than Albany State University.

## Question 4. Provide separate plots for cost and debt by control of the institution.



